<!DOCTYPE html>
<html>
<head>
	<title>Issue 83</title>
    <meta charset="utf-8">

</head>
<body>
<h3>Testing for issue 83</h3>

<script type="text/javascript">
var db = window.openDatabase('test-83', '', 'test db', 1*1024*1024);
db.transaction(function(tx) {
    tx.executeSql('CREATE TABLE people(id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, name TEXT)')
});

var runSql = function(sql) {
    var msg = document.createElement('div');
    msg.textContent = 'running ' + sql;
    document.body.appendChild(msg);
    db.readTransaction(function(tx) {
        tx.executeSql(sql, [], function(tx, rs) {
            var n = rs.rows.length;
            var s = '<hr /><div><code>' + sql + '</code></div>';
            s += '<p> received ' + n + ' rows </p>';
            for (var i = 0; i < n; i++) {
                s += '<div>' + JSON.stringify(rs.rows.item(i)) + '</div>';
            }
            var div = document.createElement('div');
            div.innerHTML = s;
            document.body.appendChild(div);
        }, function(e) {
            throw e;
        });
    });
};

runSql('SELECT * FROM sqlite_master');
runSql('SELECT * FROM sqlite_master WHERE type = "table"');

</script>

</body>
</html>