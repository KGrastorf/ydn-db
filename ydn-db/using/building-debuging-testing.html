<!DOCTYPE html>
<html>
  <head>
    <title>Building, debuging and testing</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script type="text/javascript" src="/jsc/app.js"></script>
  </head>
  <body>
    <article class="content">
      <script type="text/javascript" src="/jsc/ydn.db-dev.js"></script>
      <h2>Building</h2>
      <p>If you haven't try <a href="https://developers.google.com/closure/">Closure
          Tools</a> before, setup can be time consuming and painful. I recommend
        to read Michael Bolin book's <a href="http://shop.oreilly.com/product/0636920001416.do">Closure:
          The Definitive Guide</a>. A good understanding of closure coding
        pattern is necessary to understand and follow this library codes.</p>
      <p><a href="http://ant.apache.org/">Apache ant</a> is used to build
        javascript compiler. ydn-base repo <a href="https://bitbucket.org/ytkyaw/ydn-base/raw/master/build.xml">build.xml</a>
        defines compiler and others tools setting. You must change according to
        your local machine setting.</p>
      <p>You will get the most out of this library by using directly raw source
        code.</p>
      <h2>Error handling</h2>
      <p>A robust application must handle error comprehensively. There are three
        kinds of error in this library.</p>
      <h3>1. Exception</h3>
      <p>Exception are coding error or a voidable programming error. Most
        exceptions are occurred in argument sanity check and those checking are
        stripped in the production distribution. Library user must add enough
        control code to avoid any exception. These errors are simple and obvious
        and hence not documented in the library.&nbsp; &nbsp; <br>
      </p>
      <h3>2. Error</h3>
      <p>The library throws error with full stack trace when it cannot handle
        the situation. User may handle or rethrow the error. These error are
        documented comprehensively. If undocumented error occur, it is a
        software bug and please report to us.&nbsp;&nbsp;</p>
      <h3>3. Coded Error</h3>
      <p>Coded errors are expected error in normal execution. In this library,
        coded error are always presented in deferred function. User should check
        all deferred function for error. These error are very vague (like IO
        error), not useful information are available at compile time and hence
        not documented. But the fail callback of the deferred function always
        invoke with javascript <code>Error</code> object instance and it has <code>name</code>
        and <code>message</code> attributes to check for detail. The error
        object do not have useful stack trace and should not be rethrown.&nbsp;
        <br>
      </p>
      <h2>Debugging</h2>
      <p>During development, enable <a href="http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/">source
          map</a> in your browser option and include source map file from the
        download section. Source map enable compiled javascript to orginal
        source files. You should be able to break and inspect local variables.</p>
      <p><img alt="Source map screen shoot" src="../../images/source-map-debug.jpg"><br>
      </p>
      <p>Use build-in logging facility. </p>
      <pre>db.debug.log('ydn.db', 300);</pre>
      <p></p>
      <h2>Testing</h2>
      <p>Check out <a href="../../test/compatibility_test.html">release
          procedure</a>.</p>
      <h2>Performance <br>
      </h2>
      <p>Don't assume, but measure performance before you do optimization. </p>
      <p> There are many mis-conception in javascript community. One of them is
        minification and gzip will make fast. Both of than is not really improve
        if you measure it. The real improvement come from HTTP caching, remove
        uncode codes and combining js files. </p>
      <p> Another one is trying to get small code size in the expense of
        robutness. Modern browser takes 1 ms to parse 1 kB of compiled
        javascript code. Hence 10 kB and 100 kB javascript files are not much
        different since it is just one time parsing. The real performance come
        from algorithm choice, flow control, memoization and reusing variables.
        Most javascript code tends to create a new function un-necessarily,
        whereas object methods should be used. In this library very careful on
        memory leak and using correct procedure. There is no setTimeout used in
        handling database API. </p>
    </article>
    <script type="text/javascript">initDom()</script>
  </body>
</html>
