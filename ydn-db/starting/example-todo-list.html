<!DOCTYPE html>
<html>
<head><title>Setup</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <script type="text/javascript" src="/jsc/app.js"></script>
</head>
<body>
<article class="content">
  This example is similar to <a href="http://www.html5rocks.com/en/tutorials/indexeddb/todo/">Todo list example</a> as described in Google's HTML5Rocks web site.
  <div><br>
  </div>
  <h2>Step 1. Defining database schema</h2>
<pre>var store = {
  name:'todo',
  keyPath:"timeStamp",
  indexes: [{
    name: 'timeStamp',
    unique: true
  }]
};

var schema_ver1 = {
  version:1,
  size:1 * 1024 * 1024, // 1 MB,
  stores:[store]
};
</pre>
  <h2>Step 2. Opening the database</h2>
<pre>var db = new ydn.db.Storage('todos', schema_ver1);
</pre>
  <h2>Step 3. Adding data</h2>
<pre>var data = {
    "text":todo.value,
    "timeStamp":new Date().getTime()
  };
  db.put('todo', data);
</pre>
  <h2>Step 4. Querying</h2>
<pre>var df = db.get('todo');

  df.success(function (items) {
    var n = items.length;
    for (var i = 0; i &lt; n; i++) {
      renderTodo(items[i]);
    }
  });
</pre>
  <h2>Step 5. Rendering data</h2>
<pre>var renderTodo = function (row) {
  var todos = document.getElementById("todoItems");
  var li = document.createElement("li");
  var a = document.createElement("a");
  var t = document.createTextNode(row.text);

  a.addEventListener("click", function () {
    deleteTodo(row.timeStamp);
  }, false);

  a.textContent = " [Delete]";
  li.appendChild(t);
  li.appendChild(a);
  todos.appendChild(li)
};
</pre>
  <h2>Step 6. Deleting data</h2>
<pre>var request = db.clear('todo', id);
</pre>
  <h2>Step 7. Hooking all it up</h2>
<pre>function init() {
  getAllTodoItems();
}

init();
</pre>
  <h2>The final product</h2>
  <p>
    See complete source code in todo.js and todo.html.
  </p>

</article>
<script type="text/javascript">initDom()</script>
</body>
</html>